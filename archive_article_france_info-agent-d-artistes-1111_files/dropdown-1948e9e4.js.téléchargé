"use strict";(self.webpackChunkfranceinfo_package=self.webpackChunkfranceinfo_package||[]).push([[2227],{6325:function(t,e,i){function s(t,e,i){return(e=function(t){var e=function(t){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class r{constructor(t,e){this.utils=t,this.rootEl=e,s(this,"triggerEl",void 0),s(this,"panelList",void 0),s(this,"linksEl",void 0),s(this,"VISIBLE_CLASS","dropdown--visible"),s(this,"EVENTNAME_CLOSE","DropdownPanel::close"),s(this,"OVERFLOW_MARGIN",12),s(this,"ANIMATION_DURATION",300),this.utils.onReadyStateChange("complete",()=>this.init())}init(){var t;const e=null!==(t=this.rootEl.dataset.anchorId)&&void 0!==t?t:"";this.triggerEl=document.getElementById(e),null!==this.triggerEl?(this.panelList=this.rootEl.querySelector(".dropdown__list"),this.linksEl=Array.from(this.rootEl.querySelectorAll(".dropdown__link")),queueMicrotask(()=>{this.setupA11Y()}),queueMicrotask(()=>{this.addListeners()})):console.warn(`The trigger element cannot be found with the selector "#${e}".`)}setupA11Y(){if(this.triggerEl.setAttribute("aria-controls",this.panelList.id),this.triggerEl.setAttribute("aria-expanded","false"),"INPUT"===this.triggerEl.tagName){const t=document.querySelector(`label[for="${this.triggerEl.getAttribute("id")}"]`);if(t){const e=`label-${this.triggerEl.getAttribute("id")}`;t.setAttribute("id",e),this.panelList.setAttribute("aria-labelledby",e)}}}addListeners(){this.avoidXOverflow(),this.triggerEl.addEventListener("click",t=>{t.preventDefault(),this.toggle()}),this.triggerEl.addEventListener("keydown",t=>{this.handleKeyForTriggerElement(t)});for(const t of[this.triggerEl,this.rootEl.querySelector(".dropdown__list")])t.addEventListener("focusout",()=>{setTimeout(()=>{this.rootEl.contains(document.activeElement)||this.triggerEl===document.activeElement||this.close(!1)},100)});for(const[t,e]of this.linksEl.entries())e.addEventListener("keydown",e=>this.handleKey(e,t));document.addEventListener(this.EVENTNAME_CLOSE,()=>this.close())}toggle(){return"true"===this.triggerEl.getAttribute("aria-expanded")?this.close():this.open()}close(t=!0){this.rootEl.classList.contains(this.VISIBLE_CLASS)&&(this.triggerEl.setAttribute("aria-expanded","false"),this.rootEl.classList.remove(this.VISIBLE_CLASS),t&&this.triggerEl.focus({preventScroll:!0}))}open(){document.dispatchEvent(new CustomEvent(this.EVENTNAME_CLOSE)),this.avoidXOverflow(),this.triggerEl.setAttribute("aria-expanded","true"),this.rootEl.classList.add(this.VISIBLE_CLASS),this.triggerEl.focus({preventScroll:!0})}handleKey(t,e=void 0){switch(t.code){case"ArrowDown":t.preventDefault(),e<this.linksEl.length-1&&this.linksEl[e+1].focus();break;case"ArrowUp":t.preventDefault(),e>0&&this.linksEl[e-1].focus();break;case"Escape":this.close()}}handleKeyForTriggerElement(t){switch(t.code){case"Enter":t.preventDefault(),this.toggle();break;case"Space":"true"===this.panelList.dataset.anchorSpaceControl&&(t.preventDefault(),this.toggle());break;case"Escape":this.close()}}avoidXOverflow(){this.panelList.style.marginLeft="0px";const t=this.panelList.getBoundingClientRect(),e=document.body.clientWidth;let i=0,s="";t.left<this.OVERFLOW_MARGIN?(i=this.OVERFLOW_MARGIN-t.left,s=""):t.right+this.OVERFLOW_MARGIN>e&&(i=t.right+this.OVERFLOW_MARGIN-e,s="-"),i>0&&(this.panelList.style.marginLeft=`${s}${Math.round(i)}px`)}}new Promise(t=>{i.e(9980).then(i.bind(i,5321)).then(e=>{const i=(t=document)=>{const i=[];for(const s of t.querySelectorAll(".dropdown:not(.dropdown--activated)"))s.classList.add("dropdown--activated"),i.push(new r(e,s));return i};document.addEventListener("EsiBlock::replaceBlockByEsiContent",t=>{const e=t.detail.newElements;for(const t of e)i(t)}),t(i())})})}},function(t){t(t.s=6325)}]);