"use strict";(self.webpackChunkfranceinfo_package=self.webpackChunkfranceinfo_package||[]).push([[4836,7625,8543],{1725:function(t,e,i){i.a(t,async function(t,e){try{var n=i(9476),r=i(5613);function o(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function a(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?o(Object(i),!0).forEach(function(e){s(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function s(t,e,i){return(e=c(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function c(t){var e=l(t,"string");return"symbol"==typeof e?e:e+""}function l(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}const f=await i.e(8760).then(i.bind(i,1941));class h{constructor(t,e,i,o){var a=this;this.utils=t,this.config=e,this.piano=i,this.stickyOrchestrator=o,s(this,"COOKIE_NAME","alert-info"),s(this,"currentAlert",null),s(this,"alertNotif",void 0),s(this,"trackingObj",{feature:"bandeau_alert_info"}),s(this,"template",document.getElementById("notification--breaking-news")),s(this,"notificationEl",this.template.content.firstElementChild.cloneNode(!0)),s(this,"STICKY_CONFIG",{zone:"bottom",priority:n.M.ALERT_INFO,element:this.notificationEl,show:!0}),f.displayBanner({priority:r.f.ALERT_INFO,displayPromise:this.canBeDisplayed(),callback:async function(){a.alertNotif=await a.createAlertNotif(a.currentAlert),a.showAlertNotif(),a.registerEvents()}})}canBeDisplayed(){var t=this;const e=this.utils.readCookie(this.COOKIE_NAME);return new Promise(i=>{!async function(){if(!("onLine"in navigator)||navigator.onLine){try{const n=await t.config.getConfig(),r=await fetch(n.general.breakingNewsUrl,{priority:"low"}).then(t=>t.json()),[o]=r["breaking-news"];o&&e!==o.id.toString()&&t.utils.getContentId()!==o.content.id&&(t.currentAlert=o,i(!0))}catch(t){}i(!1)}else i(!1)}()})}async createAlertNotif(t){const e=new(0,(await i.e(4681).then(i.bind(i,8033))).default)(this.notificationEl,this.utils,this.stickyOrchestrator);return e.setDescription(t.content.title),t.content.mainMediaImage&&e.setImage(t.content.mainMediaImage.src),e.setLink(t.content.url),document.body.appendChild(this.notificationEl),e}showAlertNotif(){this.stickyOrchestrator.updateFixedElement(this.STICKY_CONFIG),this.alertNotif.show(),this.piano.sendPrint(this.trackingObj)}registerEvents(){this.alertNotif.onClose(()=>{const t=this.currentAlert.id.toString();this.utils.createCookie(this.COOKIE_NAME,t,86400),this.piano.sendClick(a(a({},this.trackingObj),{},{click:"fermer"})),this.stickyOrchestrator.updateFixedElement(a(a({},this.STICKY_CONFIG),{},{show:!1}))}),this.alertNotif.onAccept(()=>{this.piano.sendClick(a(a({},this.trackingObj),{},{click:"lire"}))})}}f.addBannersLoading("alert-info"),new Promise(t=>{(async()=>{const e=await i.e(9980).then(i.bind(i,5321)),n=await(await i.e(3355).then(i.bind(i,6672))).default,r=await(await i.e(9292).then(i.bind(i,3703))).default,o=await(await i.e(3708).then(i.bind(i,3157))).default;t(new h(e,n,r,o)),f.updateLoadingState("alert-info")})()}),e()}catch(u){e(u)}},1)},5613:function(t,e,i){i.d(e,{f:function(){return n}});const n={NL_EVENT_GROUP:90,WEB_PUSH:95,NOTIFICATION_APP:100,MATCH_PANEL:150,EVENT_BANNER:200,ALERT_INFO:300,BOOKMARK_BUTTON:350}},9476:function(t,e,i){i.d(e,{M:function(){return n}});const n={HEADER:0,EVENT_BAR:1,IN_PAGE_NAV:2,LIVE_TIMELINER_HEADER:3,BACK_TO_TOP:5,LIVE_PARTICIPATE_BTN:4,NOTIFICATION:3,DIALOG:2,EVENT_BANNER:1,ALERT_INFO:1,SNACKBAR:0}}},function(t){t(t.s=1725)}]);