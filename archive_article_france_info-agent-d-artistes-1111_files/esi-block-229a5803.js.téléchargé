"use strict";(self.webpackChunkfranceinfo_package=self.webpackChunkfranceinfo_package||[]).push([[526,4284],{526:function(e,t,o){o.r(t);class n{constructor(e){var t,o,n;this.utils=e,t=this,o="esiBlocks",n=document.querySelectorAll(".esi-block"),(o=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var o=t.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(o))in t?Object.defineProperty(t,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[o]=n;for(const e of this.esiBlocks)this.replaceBlock(e)}replaceBlock(e){return new Promise((t,o)=>{e?"true"!==e.dataset.autoload?this.utils.onAreaVisible(e,()=>this.replaceBlockByEsiContent(e).then(e=>{t(e)}),{offset:1e3}):this.replaceBlockByEsiContent(e).then(e=>{t(e)}):o(new Error("no block to be replaced"))})}replaceBlockByEsiContent(e){var t=this;return new Promise(async function(o){const n=e.getAttribute("data-esi-url"),r=await fetch(n,{priority:"low"});if(!r.ok)return;const l=await r.text();let[c,s]=t.lazyLoadScriptTags(l);c=await t.lazyLoadStylesheets(c),t.cleanEsiPlaceholder(n);const i=t.replaceBlockByElements(e,c);s.forEach(async function(e){await e()}),setTimeout(()=>{t.cleanEsiPlaceholder(n),o(i),document.dispatchEvent(new CustomEvent("EsiBlock::replaceBlockByEsiContent",{detail:{newElements:i}}))})})}replaceBlockByElements(e,t){const o=document.createElement("div");o.innerHTML=t;const n=[];for(;o.childNodes.length>0;)o.childNodes[0]instanceof HTMLElement&&n.push(o.childNodes[0]),e.parentElement.insertBefore(o.childNodes[0],e);return e.remove(),n}lazyLoadScriptTags(e){const t=/<script.*?src="(.*?)".*?>([\s\S]*?)<\/script>/gm;let o=null;const n=[];for(;null!==(o=t.exec(e));){const e=document.createElement("div");[e.innerHTML]=o;const t=o[1];n.push(()=>this.utils.loadScript(t,{attributes:Array.from(e.querySelector("script").attributes)}))}return[e.replace(t,""),n]}async lazyLoadStylesheets(e){const t=/<link.*?href="(.*?)".*?>/gm;let o=null;const n=[];for(;null!==(o=t.exec(e));){const e=o[1];n.push(this.utils.loadStylesheet(e,{preload:!1}))}return await Promise.all(n),e.replace(t,"")}cleanEsiPlaceholder(e){const t=document.querySelectorAll(".esi-block__loading-component");for(const o of t)o.dataset.esiUrl===e&&o.classList.remove("esi-block__loading-component")}}t.default=new Promise(e=>{o.e(9980).then(o.bind(o,5321)).then(t=>{e(new n(t))})})}},function(e){e(e.s=526)}]);