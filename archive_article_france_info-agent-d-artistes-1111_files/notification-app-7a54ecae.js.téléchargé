"use strict";(self.webpackChunkfranceinfo_package=self.webpackChunkfranceinfo_package||[]).push([[7268,8543],{5613:function(t,i,n){n.d(i,{f:function(){return e}});const e={NL_EVENT_GROUP:90,WEB_PUSH:95,NOTIFICATION_APP:100,MATCH_PANEL:150,EVENT_BANNER:200,ALERT_INFO:300,BOOKMARK_BUTTON:350}},9500:function(t,i,n){n.a(t,async function(t,i){try{var e=n(5613);function s(t,i,n){return(i=a(i))in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}function a(t){var i=r(t,"string");return"symbol"==typeof i?i:i+""}function r(t,i){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,i||"default");if("object"!=typeof e)return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(t)}const o=await n.e(8760).then(n.bind(n,1941));class _{constructor(t,i,n){this.utils=t,this.cmp=i,this.stickyOrchestrator=n,s(this,"DISPLAY_CLASS","app-install-banner--displayed"),s(this,"NUMBER_OF_VISITS",8),s(this,"COOKIE_VISIT_COUNT_NAME","ftviAppInstallBannerVisitCount"),s(this,"COOKIE_VISIT_COUNT_EXP",30),s(this,"COOKIE_VISIT_COUNT_TYPE","days"),s(this,"COOKIE_VISIT_COUNTED_NAME","ftviAppInstallBannerVisitCounted"),s(this,"COOKIE_VISIT_COUNTED_EXP",30),s(this,"COOKIE_VISIT_COUNTED_TYPE","minutes"),s(this,"PURPOSE_KEY","choix_personnalisation"),s(this,"appInstallNotification",void 0),this.init()}async init(){const t=(await n.e(4681).then(n.bind(n,8033))).default;this.appInstallNotification=new t(document.querySelector(".notification-app"),this.utils,this.stickyOrchestrator),o.displayBanner({priority:e.f.NOTIFICATION_APP,displayPromise:this.canBeDisplayed(),callback:()=>{this.show()}})}canBeDisplayed(){var t=this;return new Promise(async function(i){await t.cmp.getConsentFromPurposeString(t.PURPOSE_KEY)?(t.incrementVisits(),i(t.utils.isMobileDevice()&&t.getVisitCount()>=t.NUMBER_OF_VISITS)):i(!1)})}show(){this.utils.createCookie(this.COOKIE_VISIT_COUNT_NAME,"0",this.COOKIE_VISIT_COUNT_EXP,this.COOKIE_VISIT_COUNT_TYPE),this.appInstallNotification.show()}incrementVisits(){if(!this.utils.readCookie(this.COOKIE_VISIT_COUNTED_NAME)){const t=this.getVisitCount();this.utils.createCookie(this.COOKIE_VISIT_COUNT_NAME,(t+1).toString(),this.COOKIE_VISIT_COUNT_EXP,this.COOKIE_VISIT_COUNT_TYPE),this.utils.createCookie(this.COOKIE_VISIT_COUNTED_NAME,"true",this.COOKIE_VISIT_COUNTED_EXP,this.COOKIE_VISIT_COUNTED_TYPE)}}getVisitCount(){var t;return parseInt(null!==(t=this.utils.readCookie(this.COOKIE_VISIT_COUNT_NAME))&&void 0!==t?t:"0",10)}}o.addBannersLoading("app-install-banner"),new Promise(async t=>{const i=await n.e(9980).then(n.bind(n,5321)),e=await(await n.e(6247).then(n.bind(n,4416))).default,s=await(await n.e(3708).then(n.bind(n,3157))).default;t(new _(i,e,s)),o.updateLoadingState("app-install-banner")}),i()}catch(I){i(I)}},1)}},function(t){t(t.s=9500)}]);