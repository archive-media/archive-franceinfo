"use strict";(self.webpackChunkfranceinfo_package=self.webpackChunkfranceinfo_package||[]).push([[2145],{8537:function(e,t,n){function i(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class a{constructor(e,t,n,a){var o,r;this.rootEl=e,this.utils=t,this.piano=n,this.stickyOrchestrator=a,i(this,"DROPDOWN_PANEL_EVENTNAME_CLOSE","DropdownPanel::close"),i(this,"numberOfComments",0),i(this,"commentButton",void 0),i(this,"shareBtn",void 0),i(this,"trackingZone",""),this.commentButton=this.rootEl.querySelector(".comments-embed__button"),this.shareBtn=this.rootEl.querySelector(".social-zone__share-btn"),this.trackingZone=null!==(o=null===(r=this.rootEl.dataset)||void 0===r?void 0:r.zone)&&void 0!==o?o:"",this.addEvents()}async addEvents(){this.handleCommentBtnClick(),this.handleNativeShare(),this.bindClickOnSocialLinks()}handleCommentBtnClick(){var e;null===(e=this.commentButton)||void 0===e||e.addEventListener("click",()=>{this.piano.sendClick({feature:"commentaire",zone:this.trackingZone,click:this.numberOfComments>0?"voir_les_commentaires":"commenter"})})}handleNativeShare(){var e=this;this.shareBtn.addEventListener("click",async function(t){if(e.piano.sendClick({click:"partager",zone:e.trackingZone}),e.utils.isMobileDevice()&&navigator.share){t.preventDefault(),t.stopImmediatePropagation();const n=e.utils.buildSharedUrl(t.target,"share");await e.utils.webShare(n,document.title)}})}bindClickOnSocialLinks(){var e=this;for(const t of this.rootEl.querySelectorAll(".dropdown__link"))t.addEventListener("click",async function(t){const i=t.target,a=i.dataset.sharingType,o=e.utils.buildSharedUrl(i,a),r=new(0,(await n.e(2229).then(n.bind(n,2548))).default)(e.utils,e.stickyOrchestrator),s=e=>{e?r.show("Le lien a été copié dans votre presse papier","success"):r.show("Une erreur est survenue, veuillez réessayer ultérieurement","warning")};switch(document.dispatchEvent(new CustomEvent(e.DROPDOWN_PANEL_EVENTNAME_CLOSE)),e.piano.sendClick({feature:"partage_social_media",zone:e.trackingZone,click:a}),a){case"copy":try{s(await e.utils.copyToClipboard(o))}catch(e){s(!1)}break;case"email":window.open(o);break;default:window.open(o,"_blank","noopener")}})}}new Promise(e=>{(async()=>{const t=await n.e(9980).then(n.bind(n,5321)),i=await(await n.e(9292).then(n.bind(n,3703))).default,o=await(await n.e(3708).then(n.bind(n,3157))).default,r=()=>{const e=[];return document.querySelectorAll(".social-zone:not(.social-zone--activated)").forEach(n=>{n.classList.add("social-zone--activated"),e.push(new a(n,t,i,o))}),e};document.addEventListener("EsiBlock::replaceBlockByEsiContent",()=>{r()}),e(r())})()})}},function(e){e(e.s=8537)}]);