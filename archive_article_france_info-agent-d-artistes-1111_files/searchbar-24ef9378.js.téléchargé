"use strict";(self.webpackChunkfranceinfo_package=self.webpackChunkfranceinfo_package||[]).push([[7332],{8990:function(t,e,i){function s(t,e,i){return(e=function(t){var e=function(t){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class n{constructor(t,e,i){this.rootEl=t,this.debounce=e,this.utils=i,s(this,"ABOVE_CLASS","input-field--above"),s(this,"RESET_CLASS","search-bar__reset-button--visible"),s(this,"DROPDOWN_VISIBLE","dropdown--visible"),s(this,"INPUT_VALUE_ATTRIBUTE","data-search-value"),s(this,"input",void 0),s(this,"reset",void 0),s(this,"dropdown",void 0),this.input=t.querySelector(".search-bar__input"),this.reset=t.querySelector(".search-bar__reset-button"),this.dropdown=t.querySelector(".dropdown"),this.init()}init(){""!==this.input.value&&(this.addAnimation(),this.showResetButton());const t=this.debounce.default(()=>{this.typingEvent()},200);this.input.addEventListener("input",t),this.reset.addEventListener("click",()=>{this.resetInput()}),this.input.addEventListener("focusin",()=>{this.addAnimation()}),this.input.addEventListener("focusout",()=>{""===this.input.value&&""===this.input.innerText&&this.removeAnimation()}),this.dropdown&&(this.input.addEventListener("click",()=>{""===this.input.value&&this.closeDropdown()}),this.input.addEventListener("keydown",t=>{var e;if("ArrowDown"!==t.code)return;t.preventDefault();const i=null!==(e=this.utils.getFocusableElements(this.dropdown.firstElementChild).shift())&&void 0!==e?e:this.dropdown.firstElementChild;document.activeElement===this.input&&i.focus()}))}resetInput(){this.input.value="",this.removeAnimation(),this.dropdown&&this.closeDropdown(),this.hideResetButton(),this.input.focus()}showResetButton(){this.reset.classList.add(this.RESET_CLASS)}hideResetButton(){this.reset.classList.remove(this.RESET_CLASS)}openDropdown(){this.dropdown.classList.contains(this.DROPDOWN_VISIBLE)||(this.input.setAttribute("aria-expanded","true"),this.dropdown.classList.add(this.DROPDOWN_VISIBLE))}closeDropdown(){this.dropdown.classList.contains(this.DROPDOWN_VISIBLE)&&(this.input.setAttribute("aria-expanded","false"),this.dropdown.classList.remove(this.DROPDOWN_VISIBLE))}addAnimation(){this.rootEl.classList.add(this.ABOVE_CLASS)}removeAnimation(){this.rootEl.classList.remove(this.ABOVE_CLASS)}typingEvent(){const t=this.input.value.trim();this.addAnimation(),t.length>0?this.showResetButton():(this.hideResetButton(),this.removeAnimation()),this.dropdown&&(t.length>2?this.openDropdown():this.closeDropdown())}}new Promise(async t=>{const e=await i.e(1870).then(i.t.bind(i,8221,23)),s=await i.e(9980).then(i.bind(i,5321)),o=(t=document)=>{const i=t.querySelectorAll(".search-bar"),o=[];return i.forEach(t=>{o.push(new n(t,e,s))}),o};document.addEventListener("EsiBlock::replaceBlockByEsiContent",t=>{t.detail.newElements.forEach(t=>{o(t)})}),t(o())})}},function(t){t(t.s=8990)}]);