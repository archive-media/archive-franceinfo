"use strict";(self.webpackChunkfranceinfo_package=self.webpackChunkfranceinfo_package||[]).push([[5920],{8182:function(n,e,i){function t(n,e,i){return(e=function(n){var e=function(n){if("object"!=typeof n||!n)return n;var e=n[Symbol.toPrimitive];if(void 0!==e){var i=e.call(n,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(n);return"symbol"==typeof e?e:e+""}(e))in n?Object.defineProperty(n,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[e]=i,n}class a{constructor(n,e){this.utils=n,this.piano=e,t(this,"NAVPANEL_OPEN_CLASSNAME","navigation-panel--opened"),t(this,"MAINNAVPANEL_MOVED_CLASSNAME","navigation-panel__mainpanel--moved"),t(this,"SUBNAVPANEL_MOVED_CLASSNAME","navigation-panel__subpanel--moved"),t(this,"OVERLAY_CLASSNAME","navigation-panel__overlay"),t(this,"HTML_SCROLLBAR_STABLE_CLASSNAME","scrollbar-gutter-stable"),t(this,"OVERLAY_VISIBLE_CLASSNAME","navigation-panel__overlay--visible"),t(this,"navigationPanel",void 0),t(this,"mainPanel",void 0),t(this,"closeButton",void 0),t(this,"mobileCloseButton",void 0),t(this,"navPanelInitialized",!1),this.utils.onReadyStateChange("complete",()=>this.init())}init(){this.navigationPanel=document.querySelector(".navigation-panel"),this.mainPanel=this.navigationPanel.querySelector(".navigation-panel__mainpanel"),this.navigationPanel&&this.mainPanel&&(this.closeButton=this.navigationPanel.querySelector(".navigation-panel__top-close"),this.mobileCloseButton=document.querySelector(".header-main__menu"),requestAnimationFrame(()=>{this.navigationPanel.style.visibility="hidden"}),queueMicrotask(()=>{this.bindMainpanelToggle()}),queueMicrotask(()=>{this.createOverlay()}))}bindMainpanelToggle(){this.navigationPanel.addEventListener("NavigationPanel::open",()=>this.openMainpanel()),this.navigationPanel.addEventListener("NavigationPanel::close",()=>this.closeMainpanel()),this.navigationPanel.addEventListener("NavigationPanel::toggle",()=>this.navigationPanel.classList.contains(this.NAVPANEL_OPEN_CLASSNAME)?this.closeMainpanel():this.openMainpanel()),this.closeButton.addEventListener("click",()=>this.closeMainpanel())}openMainpanel(){this.navigationPanel.classList.contains(this.NAVPANEL_OPEN_CLASSNAME)||(this.displayOverlay(),this.mainPanel.scrollTop=0,requestAnimationFrame(()=>{this.navigationPanel.style.visibility="visible"}),this.navigationPanel.classList.add(this.NAVPANEL_OPEN_CLASSNAME),this.utils.focusTrap(this.mainPanel,()=>this.closeMainpanel(),{additionalFocusableElements:[this.utils.isBreakpoint("large")?this.closeButton:this.mobileCloseButton]})),this.navigationPanel.dispatchEvent(new CustomEvent("NavigationPanel::opened")),this.navPanelInitialized||(queueMicrotask(()=>{this.bindSubpanelsToggle()}),queueMicrotask(()=>{this.initTracking()}),this.navPanelInitialized=!0)}closeMainpanel(){this.navigationPanel.classList.contains(this.NAVPANEL_OPEN_CLASSNAME)&&(this.hideOverlay(),this.navigationPanel.classList.remove(this.NAVPANEL_OPEN_CLASSNAME),setTimeout(()=>{this.mainPanel.classList.remove(this.MAINNAVPANEL_MOVED_CLASSNAME),this.closeAllSubpanels(),requestAnimationFrame(()=>{this.navigationPanel.style.visibility="hidden"})},350),document.dispatchEvent(new CustomEvent("FocusTrap::exit"))),this.navigationPanel.dispatchEvent(new CustomEvent("NavigationPanel::closed"))}createOverlay(){const n=document.createElement("div");n.classList.add(this.OVERLAY_CLASSNAME),this.navigationPanel.parentNode.insertBefore(n,this.navigationPanel),n.addEventListener("click",()=>this.closeMainpanel())}displayOverlay(){const n=document.querySelector(`.${this.OVERLAY_CLASSNAME}`);document.documentElement.classList.add(this.HTML_SCROLLBAR_STABLE_CLASSNAME),n.classList.add(this.OVERLAY_VISIBLE_CLASSNAME)}hideOverlay(){document.querySelector(`.${this.OVERLAY_CLASSNAME}`).classList.remove(this.OVERLAY_VISIBLE_CLASSNAME),document.documentElement.classList.remove(this.HTML_SCROLLBAR_STABLE_CLASSNAME)}bindSubpanelsToggle(){const n=this.navigationPanel.querySelectorAll(".panel-item button.panel-item__content");for(const i of n){var e;const n=null!==(e=i.dataset.panel)&&void 0!==e?e:null;n&&i.addEventListener("click",()=>requestAnimationFrame(()=>this.openSubpanel(n)))}const i=this.navigationPanel.querySelectorAll(".navigation-panel__back");for(const n of i){const e=n.parentElement.id;n.addEventListener("click",()=>requestAnimationFrame(()=>this.closeSubpanel(e)))}}openSubpanel(n){this.closeAllSubpanels();const e=this.navigationPanel.querySelector(`#${n}`);e?(e.scrollTop=0,this.mainPanel.classList.add(this.MAINNAVPANEL_MOVED_CLASSNAME),e.classList.add(this.SUBNAVPANEL_MOVED_CLASSNAME),setTimeout(()=>{this.utils.focusTrap(e,()=>requestAnimationFrame(()=>this.closeSubpanel(n)),{elementToFocusAtFirst:e.querySelector(".navigation-panel__back"),additionalFocusableElements:[this.utils.isBreakpoint("large")?this.closeButton:this.mobileCloseButton]})},400)):console.warn(`subpanel not found with ID : #${n}`)}closeSubpanel(n){const e=this.navigationPanel.querySelector(`#${n}`);if(!e)return void console.warn(`subpanel not found with ID : #${n}`);document.dispatchEvent(new CustomEvent("FocusTrap::exit")),this.mainPanel.classList.remove(this.MAINNAVPANEL_MOVED_CLASSNAME),e.classList.remove(this.SUBNAVPANEL_MOVED_CLASSNAME);const i=this.navigationPanel.querySelector(`.panel-item .panel-item__content[data-panel="${n}"]`);setTimeout(()=>{this.utils.focusTrap(this.mainPanel,()=>this.closeMainpanel(),{elementToFocusAtFirst:i,additionalFocusableElements:[this.utils.isBreakpoint("large")?this.closeButton:this.mobileCloseButton]})},400)}closeAllSubpanels(){const n=this.navigationPanel.querySelectorAll(`.navigation-panel__subpanel.${this.SUBNAVPANEL_MOVED_CLASSNAME}`);for(const e of n)e.classList.remove(this.SUBNAVPANEL_MOVED_CLASSNAME);document.dispatchEvent(new CustomEvent("FocusTrap::exit"))}initTracking(){const n=this.navigationPanel.querySelector(".navigation-panel__form");n.addEventListener("submit",()=>{const e=n.querySelector(".search-bar__input");this.piano.sendClick({click:"validation_recherche",feature:"barre_de_recherche",search_type:"global",ise_keyword:e.value})});const e=n=>this.utils.slugify(n.querySelector(".panel-item__label").textContent),i=(n,e)=>e,t=(n,e)=>`${this.utils.slugify(n.closest(".navigation-panel__subpanel").querySelector(".navigation-panel__back").textContent)}_${e||this.utils.slugify(n.querySelector(".panel-item__label").textContent)}`,a=[[".navigation-panel__mainpanel .navigation-panel__home-links",e],[".navigation-panel__mainpanel .navigation-panel__directs-links",i,"en_direct"],[".navigation-panel__mainpanel .navigation-panel__currently-links",i,"tag_chaud"],[".navigation-panel__mainpanel .navigation-panel__editorial-links",e],[".navigation-panel__mainpanel .navigation-panel__rubrics-links",e],[".navigation-panel__mainpanel .navigation-panel__group-links",e],[".navigation-panel__subpanel .navigation-panel__directs-links",t,"en_direct"],[".navigation-panel__subpanel .navigation-panel__currently-links",t,"tag_chaud"],[".navigation-panel__subpanel .navigation-panel__rubrics-links",t]];for(const n of a){const[e,i,t]=n;queueMicrotask(()=>{const n=this.navigationPanel.querySelectorAll(`${e} .panel-item__content`);for(const e of n)e.addEventListener("click",()=>{const n=i(e,t);n&&this.piano.sendClick({zone:"burger",click:n})})})}}}new Promise(async n=>{const e=await i.e(9980).then(i.bind(i,5321)),t=await(await i.e(9292).then(i.bind(i,3703))).default;n(new a(e,t))})}},function(n){n(n.s=8182)}]);